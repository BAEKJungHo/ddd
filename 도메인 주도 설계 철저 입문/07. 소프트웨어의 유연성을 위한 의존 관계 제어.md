# 소프트웨어의 유연성을 위한 의존 관계 제어

이번 장에서 설명하는 의존 관계 제어는 도메인 로직을 기술적 요소에서 분리해 소프트웨어를 유연하게 만드는 방법이다.

## 의존이란 ?

의존은 어떤 객체가 다른 객체를 참조하면서 발생한다.

- A 가 B 에 의존

```java
public class A {
  private B b;
}
```

`a ---> b`

의존은 의존하는 객체에서 대상이 되는 객체 쪽으로 향하는 화살표를 통해 나타낸다.

의존은 `인터페이스와 구현체`사이에서도 존재한다. Ex. interface 와 impl (속이빈 화살표 = 일반화 관계)

### 추상 타입에 대한 의존(의존 관계 역전 원칙, Inversion Of Control)

```java
@RequiredArgsConstructor
@Service
public class UserService {
  
  // 구현체에 의존 -> 특정 퍼시스턴시 기술에 의존(특정 DB 벤더에 의존)
  // private final UserRepositoryImpl userRepository;

  // IOC -> 추상 타입에 대한 의존 -> 어떤 구현체가 와도 상관 없음
  // private final UserRepository userRepository;
}
```

## 의존 관계 역전 원칙(DIP, Dependency Inversion Principle)

- DIP(Dependency Inversion Principle)
  - 추상화 수준이 높은 모듈이 낮은 모듈에 의존해서는 안 되며 두 모듈 모두 추상 타입에 의존해야 한다.
  - 추상 타입이 구현의 세부 사항에 의존해서는 안 된다. 구현의 세부 사항이 추상 타입에 의존해야 한다.

__DIP 는 소프트웨어를 유연하게 하며, 기술적 요소가 비지니스 로직을 침범하는 일을 막기 위해서는 필수적이다.__

### 추상 타입에 의존하라





